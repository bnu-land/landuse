{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "survey_IndexCurrentValueCalculation",
        "designer|userClassName": "survey_IndexCurrentValueCalculation",
        "height": 588,
        "id": null,
        "layout": "anchor",
        "title": "",
        "width": 924
    },
    "name": "survey_TypicalEnterprise1",
    "designerId": "160514b0-07fd-4f66-8240-4ce75caac37b",
    "viewControllerInstanceId": "a3c61f94-ee32-4a03-be3e-2b646dc90f2a",
    "viewModelInstanceId": "11c0b2c7-fb87-4f7b-9889-6fa6285f2942",
    "cn": [
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "bodyPadding": 10,
                "designer|snapToGrid": 10,
                "height": 250,
                "id": "survey_IndexCurrentValue_Form",
                "jsonSubmit": true,
                "layout": "absolute",
                "layout|anchor": "100%",
                "title": null
            },
            "name": "MyForm",
            "designerId": "53d0ebb9-5c5d-4095-a93a-1ea510b2520e",
            "cn": [
                {
                    "type": "Ext.toolbar.Toolbar",
                    "reference": {
                        "name": "dockedItems",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dock": "top"
                    },
                    "name": "MyToolbar",
                    "designerId": "6909c25b-0964-4ba2-979e-a0a672954f87",
                    "cn": [
                        {
                            "type": "Ext.form.field.ComboBox",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "displayField": "name",
                                "fieldLabel": "选择地区",
                                "id": "survey_KfqArea_Combo",
                                "layout|flex": null,
                                "store": "thematic_LCCT_KFQStore",
                                "submitValue": false,
                                "valueField": "value"
                            },
                            "name": "MyComboBox1",
                            "designerId": "b7a6612f-8965-47e0-810c-733bf9399bd9",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onComboboxChange",
                                        "implHandler": [
                                            "var store = Ext.StoreMgr.get('survey_IndexCurrent_MapStore');",
                                            "store.clearFilter();",
                                            "store.filter('mapKey',newValue);"
                                        ],
                                        "name": "change",
                                        "scope": "me"
                                    },
                                    "name": "onComboboxChange",
                                    "designerId": "015c154c-3ec8-404d-a09a-77f08b1f08bf"
                                }
                            ]
                        },
                        {
                            "type": "Ext.form.field.ComboBox",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "displayField": "mapName",
                                "fieldLabel": "选择年份",
                                "id": "survey_layerUrls_Combo",
                                "labelWidth": 60,
                                "layout|flex": null,
                                "name": "",
                                "store": "survey_IndexCurrent_MapStore",
                                "submitValue": false,
                                "valueField": "mapUrl",
                                "width": 250
                            },
                            "name": "MyComboBox2",
                            "designerId": "a46a4832-f739-4f87-827e-a3c73049499e"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": null,
                                "text": "计算现状值"
                            },
                            "name": "MyButton1",
                            "designerId": "301eb22b-1f82-4a01-8ba7-0343b32511da",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "handler",
                                        "implHandler": [
                                            "//加入地图的js文件",
                                            "var head = document.getElementsByTagName('head')[0];",
                                            "var script= document.createElement(\"script\");",
                                            "script.type = \"text/javascript\";",
                                            "script.src=\"mapjs/survey_IndexCurrentValueCalculation_map.js\";",
                                            "head.appendChild(script);"
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "4c1bac65-ca00-443c-bd9d-7807ed2c8f40"
                                }
                            ]
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": null,
                                "text": "保存计算结果"
                            },
                            "name": "MyButton4",
                            "designerId": "9a4f051c-798f-4559-a21b-3f05f155fbbd",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "handler",
                                        "implHandler": [
                                            "var myform = Ext.getCmp('survey_IndexCurrentValue_Form').getForm();",
                                            "if (myform.isValid())",
                                            "{",
                                            "    myform.submit({",
                                            "        url : 'add_landKfqType',",
                                            "        success : function (form, action)",
                                            "        {",
                                            "            Ext.Msg.alert('成功', '本次计算结果添加成功。');",
                                            "            var mystore = Ext.StoreMgr.get('landKfqTypeStore'); //获得store对象",
                                            "            mystore.reload();",
                                            "            myform.reset();",
                                            "        },",
                                            "        failure: function(form, action){",
                                            "            Ext.Msg.alert('失败', '添加失败，请重试。');",
                                            "        }",
                                            "    });",
                                            "}",
                                            "else",
                                            "{",
                                            "    Ext.Msg.alert('注意', '填写的信息有误，请检查！');",
                                            "}"
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "381bfff2-c7e6-4130-82f4-59d06f1e34db"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "allowBlank": false,
                        "displayField": "name",
                        "fieldLabel": "开发区评价类型",
                        "id": "survey_index_kfqTypeCombo",
                        "layout|x": 20,
                        "layout|y": 170,
                        "name": "kfqType",
                        "store": "landKfqTypeComboStore",
                        "valueField": "value",
                        "width": 340
                    },
                    "name": "MyComboBox3",
                    "designerId": "56a77b27-b178-426d-83c8-58b185e405fd"
                },
                {
                    "type": "Ext.form.field.Hidden",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "Label",
                        "id": "survey_index_CalcNameText",
                        "layout|x": 370,
                        "layout|y": 120,
                        "name": "calcName"
                    },
                    "name": "MyHiddenField",
                    "designerId": "e32faa08-928a-489d-9cd6-a4769d55b9b2"
                },
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|snapToGrid": 10,
                        "height": 145,
                        "layout": "absolute",
                        "title": "指标现状值",
                        "width": 370
                    },
                    "name": "MyFieldSet",
                    "designerId": "05a9212d-883f-4ae6-bdd7-23718b185006",
                    "cn": [
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "allowBlank": false,
                                "fieldLabel": "建成城镇总面积",
                                "hideTrigger": true,
                                "id": "survey_index_yjcczzmjText",
                                "keyNavEnabled": false,
                                "layout|x": 10,
                                "layout|y": 90,
                                "mouseWheelEnabled": false,
                                "name": "jcczzmj",
                                "width": 290
                            },
                            "name": "MyNumberField1",
                            "designerId": "df314253-10be-40df-b0d9-ec1f715de0a7"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "allowBlank": false,
                                "fieldLabel": "工矿仓储面积",
                                "hideTrigger": true,
                                "id": "survey_index_gkccmjText",
                                "keyNavEnabled": false,
                                "layout|x": 10,
                                "layout|y": 10,
                                "mouseWheelEnabled": false,
                                "name": "gkcczmj",
                                "width": 220
                            },
                            "name": "MyNumberField",
                            "designerId": "dcd9bb16-51b4-47ea-bcda-154b82feb47f"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "allowBlank": false,
                                "fieldLabel": "住宅用地面积",
                                "hideTrigger": true,
                                "id": "survey_index_zzmjText",
                                "keyNavEnabled": false,
                                "layout|x": 10,
                                "layout|y": 50,
                                "mouseWheelEnabled": false,
                                "name": "zzzmj",
                                "width": 220
                            },
                            "name": "MyNumberField3",
                            "designerId": "4d5dc09a-5cfb-4caa-a22d-1595a50acc72"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "allowBlank": false,
                                "fieldLabel": "比例",
                                "hideTrigger": true,
                                "id": "survey_index_gkccRateText",
                                "keyNavEnabled": false,
                                "labelWidth": 30,
                                "layout|x": 240,
                                "layout|y": 10,
                                "mouseWheelEnabled": false,
                                "name": "gkccRate",
                                "width": 100
                            },
                            "name": "MyNumberField2",
                            "designerId": "cf7797f5-0483-4f87-bebc-db23947db95a"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "allowBlank": false,
                                "fieldLabel": "比例",
                                "hideTrigger": true,
                                "id": "survey_index_zzmjRateText",
                                "keyNavEnabled": false,
                                "labelWidth": 30,
                                "layout|x": 240,
                                "layout|y": 50,
                                "mouseWheelEnabled": false,
                                "name": "zzRate",
                                "width": 100
                            },
                            "name": "MyNumberField4",
                            "designerId": "1e60310b-5369-478a-81a2-d99db4fa7368"
                        },
                        {
                            "type": "Ext.form.Label",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|x": 310,
                                "layout|y": 95,
                                "text": "公顷"
                            },
                            "name": "MyLabel",
                            "designerId": "67350121-7092-4731-b612-0bcbb1221780"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.grid.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "id": "land_KfqTypeGird",
                "layout|anchor": "100% 0",
                "store": "landKfqTypeStore",
                "title": "指标现状历史计算数据"
            },
            "name": "MyGridPanel3",
            "designerId": "0231971d-1467-4bb5-942f-aab4ae40f13f",
            "cn": [
                {
                    "type": "Ext.grid.column.RowNumberer",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "name": "MyRowNumberer2",
                    "designerId": "ef2eb25c-bad7-485d-9022-017b8e6d8a06"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "calcName",
                        "text": "名称",
                        "width": 130
                    },
                    "name": "MyColumn13",
                    "designerId": "33af7508-9124-4e17-b268-8e69a57c9b55"
                },
                {
                    "type": "Ext.grid.column.Date",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "calcDate",
                        "format": "Y-m-d",
                        "text": "时间",
                        "width": 100
                    },
                    "name": "MyDateColumn2",
                    "designerId": "98231568-ce4a-497c-99ca-fc543c3c418d"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "kfqType",
                        "text": "开发区类型",
                        "width": 150
                    },
                    "name": "MyColumn",
                    "designerId": "a89798ab-8846-44ed-a6a1-855965d55d69"
                },
                {
                    "type": "Ext.grid.column.Number",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "jcczzmj",
                        "format": "0,000.000",
                        "text": "建成城镇总面积/公顷",
                        "width": 150
                    },
                    "name": "MyNumberColumn",
                    "designerId": "04c7b6de-a377-494b-aadd-2d0b21267798"
                },
                {
                    "type": "Ext.grid.column.Number",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "gkcczmj",
                        "format": "0,000.000",
                        "text": "工矿仓储面积/公顷",
                        "width": 130
                    },
                    "name": "MyNumberColumn3",
                    "designerId": "493df594-4694-4b86-84d3-d81589b2689c"
                },
                {
                    "type": "Ext.grid.column.Number",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "gkccRate",
                        "format": "0,000.000",
                        "text": "工矿仓储比例"
                    },
                    "name": "MyNumberColumn5",
                    "designerId": "cffe885c-ada3-480e-b161-2e057a30c3a5"
                },
                {
                    "type": "Ext.grid.column.Number",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "zzzmj",
                        "format": "0,000.000",
                        "text": "住宅面积/公顷",
                        "width": 120
                    },
                    "name": "MyNumberColumn4",
                    "designerId": "e632d8d0-a33a-4c0b-9508-8e4b18e7d762"
                },
                {
                    "type": "Ext.grid.column.Number",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "zzRate",
                        "format": "0,000.000",
                        "text": "住宅比例"
                    },
                    "name": "MyNumberColumn6",
                    "designerId": "0e393cc9-b851-4879-946d-8f79b1a2e38c"
                },
                {
                    "type": "Ext.grid.View",
                    "reference": {
                        "name": "viewConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "name": "MyGridView3",
                    "designerId": "ae10b007-8fd8-456a-855a-f507991795dd"
                },
                {
                    "type": "Ext.toolbar.Toolbar",
                    "reference": {
                        "name": "dockedItems",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dock": "top"
                    },
                    "name": "MyToolbar4",
                    "designerId": "0c82bd08-5c0a-40af-9a49-fd0d0bedb042",
                    "cn": [
                        {
                            "type": "Ext.form.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fieldLabel": null,
                                "id": "land_KfqType_SearchText",
                                "layout|flex": null
                            },
                            "name": "MyTextField",
                            "designerId": "ad15401b-1573-47d8-98b9-ec4de65841b4"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "icon": "images/table/search.png",
                                "layout|flex": null,
                                "text": "查询"
                            },
                            "name": "MyButton",
                            "designerId": "0d314404-4249-48ee-983d-dac15644b020",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onButtonClick4",
                                        "implHandler": [
                                            "var searchKeyword = Ext.getCmp('land_KfqType_SearchText').getValue();",
                                            "var mystore = Ext.StoreMgr.get('landKfqTypeStore'); //获得store对象",
                                            "//在load事件中添加参数",
                                            "mystore.load({",
                                            "    params :{searchKeyword : searchKeyword}",
                                            "});"
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "name": "onButtonClick4",
                                    "designerId": "a3666be4-8d63-4bb7-93f0-879df62f22a9"
                                }
                            ]
                        },
                        {
                            "type": "Ext.toolbar.Separator",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": null
                            },
                            "name": "MySeparator",
                            "designerId": "dfb71261-80f0-4e40-a5f7-f71605219b10"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "icon": "images/table/edit.png",
                                "layout|flex": null,
                                "text": "修改"
                            },
                            "name": "MyButton2",
                            "designerId": "71b20045-f064-44f6-9f1c-aa0c646b3d33",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onButtonClick21",
                                        "implHandler": [
                                            "//获取数据",
                                            "var models = Ext.getCmp('system_MapManageGrid').getSelection();",
                                            "if (models.length === 0){",
                                            "    Ext.Msg.alert('提示', '请选择一条数据后再修改信息。');",
                                            "    return;",
                                            "} else if(models.length >1){",
                                            "    Ext.Msg.alert('提示', '每次只能修改一条信息，请重新选择。');",
                                            "    return;",
                                            "}",
                                            "//启动窗口",
                                            "var win = Ext.widget('system_MapAddWindow');",
                                            "win.setTitle('修改信息');",
                                            "win.show();",
                                            "",
                                            "//改变Ajax url",
                                            "var form = Ext.getCmp('system_MapAddForm').getForm();",
                                            "form.loadRecord(models[0]);",
                                            "form.url = 'update_Map';"
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "name": "onButtonClick21",
                                    "designerId": "52613ece-fea0-4af8-be4c-e4f51de15e07"
                                }
                            ]
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "icon": "images/table/delete.png",
                                "layout|flex": null,
                                "text": "删除"
                            },
                            "name": "MyButton3",
                            "designerId": "f8feefa2-86b8-4729-9553-d832d162fba6",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onButtonClick31",
                                        "implHandler": [
                                            "//获取数据",
                                            "var records = Ext.getCmp('land_KfqTypeGird').getSelection();",
                                            "if (records.length === 0){",
                                            "   Ext.Msg.alert('提示', '请选择一条数据后再点击删除按钮。');",
                                            "   return;",
                                            "}",
                                            "var  ids =new Array(records.length);",
                                            "for(var i = 0;i<records.length;i++){",
                                            "    ids[i] = records[i].get(\"id\");",
                                            "}",
                                            "if(ids.length ==1){",
                                            "    Ext.Msg.confirm('提示', '您正在删除：<br/>[' + records[0].get('calcName') +']<br/> 确认删除？', getResult);",
                                            "}else{",
                                            "    Ext.Msg.confirm('提示', '您正在删除<br/>[' +ids.length+']组数据。<br/> 确认删除？', getResult);",
                                            "}",
                                            "",
                                            "",
                                            "function getResult(confirm)",
                                            "{",
                                            "    console.log('confirm:', confirm);",
                                            "    if (confirm == \"yes\"){",
                                            "        Ext.Ajax.request(",
                                            "        {",
                                            "            url : 'del_landKfqTypeById',",
                                            "            params :",
                                            "            {",
                                            "                ids : ids",
                                            "            },",
                                            "            success : function (response){",
                                            "                Ext.Msg.alert('成功提示', '记录删除成功。');",
                                            "                var mystore = Ext.StoreMgr.get('landKfqTypeStore');",
                                            "                mystore.load();",
                                            "            },",
                                            "            failure : function (response){",
                                            "                Ext.Msg.alert('失败提示', '记录删除失败。');",
                                            "            }",
                                            "        });",
                                            "    }",
                                            "}"
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "name": "onButtonClick31",
                                    "designerId": "b5cf3daa-b7c6-4729-94d6-a0a894310975"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}