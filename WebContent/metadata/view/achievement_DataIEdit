{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "achievement_DataIEdit",
        "designer|userClassName": "achievement_DataIEdit",
        "height": 588,
        "html": [
            "<div id = \"map\" style = \"width=100%;height:100%;\"></div>"
        ],
        "id": null,
        "title": "成果数据编辑",
        "width": 786
    },
    "name": "achievement_DataIBrowse1",
    "designerId": "bdccaff1-df46-425e-bdcc-429879c75365",
    "viewControllerInstanceId": "01cf8c0a-7694-433c-86ea-b8f351725ddc",
    "viewModelInstanceId": "768a14bd-6767-4121-a98f-5d216f364f32",
    "cn": [
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onPanelAfterRender",
                "implHandler": [
                    "//加入地图的js文件",
                    "var head = document.getElementsByTagName('head')[0];",
                    "var script= document.createElement(\"script\");",
                    "script.type = \"text/javascript\";",
                    "script.src=\"mapjs/homeMap.js\";",
                    "head.appendChild(script);"
                ],
                "name": "afterrender",
                "scope": "me"
            },
            "name": "onPanelAfterRender",
            "designerId": "0885005f-35e0-4876-a607-b57948f8bdde"
        },
        {
            "type": "Ext.toolbar.Toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dock": "top"
            },
            "name": "MyToolbar3",
            "designerId": "cd9e5e87-0ef7-4385-ae01-8e9255513195",
            "cn": [
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": null,
                        "id": "noticeNews_SearchText1",
                        "layout|flex": null
                    },
                    "name": "MyTextField",
                    "designerId": "8dfe9987-3ab2-41ce-97f3-2a7ebfe3891b"
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "icon": "images/table/search.png",
                        "layout|flex": null,
                        "text": "查询"
                    },
                    "name": "MyButton",
                    "designerId": "e38fff1a-d251-40ee-a055-007a5eb0b315",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "handler",
                                "implHandler": [
                                    "var searchKeyword = Ext.getCmp('noticeNews_SearchText').getValue();",
                                    "var mystore = Ext.StoreMgr.get('notice_newsStore'); //获得store对象",
                                    "//在load事件中添加参数",
                                    "mystore.load({",
                                    "    params :{searchKeyword : searchKeyword}",
                                    "});"
                                ]
                            },
                            "name": "handler",
                            "designerId": "3ff9ef4e-8813-4928-97e1-5e0fd1e9f159"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "icon": "images/table/preview.png",
                        "layout|flex": null,
                        "text": "全局"
                    },
                    "name": "MyButton4",
                    "designerId": "3641c873-4bd9-401d-a931-91e91c3ec702"
                },
                {
                    "type": "Ext.toolbar.Separator",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null
                    },
                    "name": "MySeparator",
                    "designerId": "4de01193-044e-415c-8434-0cbf3a5976bf"
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "icon": "images/table/edit.png",
                        "layout|flex": null,
                        "text": "启动编辑"
                    },
                    "name": "MyButton2",
                    "designerId": "c03eef33-a4e0-456d-8ba4-6ff2d8202129",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "handler",
                                "implHandler": [
                                    "//获取数据",
                                    "var records = Ext.getCmp('notice_NewsManageGrid').getSelection();",
                                    "if (records.length === 0){",
                                    "    Ext.Msg.alert('提示', '请选择一条数据后再修改信息。');",
                                    "    return;",
                                    "} else if(records.length >1){",
                                    "    Ext.Msg.alert('提示', '每次只能修改一条信息，请重新选择。');",
                                    "    return;",
                                    "}",
                                    "//启动窗口",
                                    "var xtype = 'notice_Publish';",
                                    "var mainView = Ext.getCmp('mainView');",
                                    "mainView.removeAll();",
                                    "mainView.add(Ext.widget(xtype));",
                                    "",
                                    "//改变Ajax url",
                                    "var form = Ext.getCmp('notice_PublishForm').getForm();",
                                    "form.loadRecord(records[0]);",
                                    "form.url = 'update_NoticeNews';"
                                ]
                            },
                            "name": "handler",
                            "designerId": "3b962a80-575e-457d-817a-a80681edc0c5"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "icon": "images/table/save.png",
                        "layout|flex": null,
                        "text": "保存"
                    },
                    "name": "MyButton3",
                    "designerId": "b531fc37-c533-4653-9939-a2b7aa5f0dc1",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "handler",
                                "implHandler": [
                                    "//获取数据",
                                    "var records = Ext.getCmp('notice_NewsManageGrid').getSelection();",
                                    "if (records.length === 0){",
                                    "    Ext.Msg.alert('提示', '请选择一条数据后再点击删除按钮。');",
                                    "    return;",
                                    "}else if(records.length >1){",
                                    "    Ext.Msg.alert('提示', '每次只能删除一条文章。');",
                                    "    return;",
                                    "}",
                                    "var id = records[0].get(\"id\");",
                                    "var columnName= records[0].get(\"noticeTitle\");",
                                    "Ext.Msg.confirm('提示', '您正在删除<br/>[' +columnName+']。<br/> 确认删除？', getResult);",
                                    "",
                                    "var record = records[0];",
                                    "",
                                    "function getResult(confirm)",
                                    "{",
                                    "    console.log('confirm:', confirm);",
                                    "    if (confirm == \"yes\"){",
                                    "        Ext.Ajax.request(",
                                    "            {",
                                    "                url : 'del_NoticeToDraft',",
                                    "                params :",
                                    "                {",
                                    "                    id : record.get('id')",
                                    "                },",
                                    "                success : function (response){",
                                    "                    Ext.Msg.alert('成功提示', '记录删除成功。');",
                                    "                    var mystore = Ext.StoreMgr.get('notice_newsStore');",
                                    "                    mystore.load();",
                                    "                },",
                                    "                failure : function (response){",
                                    "                    Ext.Msg.alert('失败提示', '记录删除失败。');",
                                    "                }",
                                    "            });",
                                    "    }",
                                    "}"
                                ]
                            },
                            "name": "handler",
                            "designerId": "73341b89-c1ab-4fa7-984a-41f4469877b2"
                        }
                    ]
                }
            ]
        }
    ]
}