{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "business_uploadPhoto",
        "designer|userClassName": "business_uploadPhoto",
        "height": 491,
        "layout": "border",
        "title": "企业上传图片数据",
        "width": 959
    },
    "name": "MyPanel7",
    "designerId": "50569405-4656-4e14-956a-e72ea79bd132",
    "viewControllerInstanceId": "908e75be-8058-4e65-a4d4-2f3a15a40c7c",
    "viewModelInstanceId": "3d204037-351f-4431-b826-6beb3f9e6acb",
    "cn": [
        {
            "type": "Ext.panel.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout": "border",
                "layout|region": "west",
                "layout|split": true,
                "title": "",
                "width": "50%"
            },
            "name": "MyPanel",
            "designerId": "1bb49067-f600-4b8b-b950-e82b7e2d4ab8",
            "cn": [
                {
                    "type": "Ext.form.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "autoScroll": true,
                        "designer|snapToGrid": 10,
                        "dock": null,
                        "height": "50%",
                        "id": "photo_info",
                        "jsonSubmit": true,
                        "layout": "absolute",
                        "layout|region": "north",
                        "title": "图片信息录入",
                        "url": "add_Photos"
                    },
                    "name": "MyForm2",
                    "designerId": "87202b40-8c70-46e6-916f-6ecc203daf63",
                    "cn": [
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|x": 270,
                                "layout|y": 340,
                                "text": "提交审核"
                            },
                            "name": "MyButton9",
                            "designerId": "730a03d3-0753-4ce0-80ad-93a7eae07541",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "handler",
                                        "implHandler": [
                                            "var myform = Ext.getCmp('photo_info').getForm();",
                                            "var choose=Ext.getCmp('choosePicture').value;",
                                            "var photo_path=Ext.getCmp('photo_path');",
                                            "//var path=Ext.widget('photoPath').value;",
                                            "if (myform.isValid())",
                                            "{",
                                            "    console.log(\"控件有效\");",
                                            "    ",
                                            "    console.log(choose);",
                                            "    myform.submit({",
                                            "        //url : 'add_picture',",
                                            "        success : function (form, action)",
                                            "        {",
                                            "            console.log(\"成功进入\");",
                                            "            Ext.Msg.alert('成功', '图片上传成功。');",
                                            "            var mystore = Ext.StoreMgr.get('Business_photoStore'); //获得store对象",
                                            "            mystore.reload();",
                                            "            var xtype = 'business_uploadPhoto';",
                                            "            var mainView = Ext.getCmp('mainView');",
                                            "            mainView.removeAll();",
                                            "            mainView.add(Ext.widget(xtype));",
                                            "        },",
                                            "        failure: function(form, action){",
                                            "            Ext.Msg.alert('失败', '图片上传失败，请重试。');",
                                            "        }",
                                            "    });",
                                            "}",
                                            "else",
                                            "{",
                                            "    Ext.Msg.alert('注意', '填写的信息有误，请检查！');",
                                            "}"
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "29d0ab90-627d-44b1-853e-ffea4df22149"
                                }
                            ]
                        },
                        {
                            "type": "Ext.form.field.TextArea",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fieldLabel": "备注",
                                "labelWidth": 70,
                                "layout|x": 30,
                                "layout|y": 250,
                                "name": "other",
                                "value": [
                                    "无"
                                ],
                                "width": 360
                            },
                            "name": "MyTextArea",
                            "designerId": "7316cfd7-db6b-4466-87f3-18dbd19e3cf0"
                        },
                        {
                            "type": "Ext.form.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fieldLabel": "图片标题",
                                "id": "title_photo",
                                "labelWidth": 70,
                                "layout|x": 30,
                                "layout|y": 140,
                                "name": "photoTitle"
                            },
                            "name": "MyTextField10",
                            "designerId": "4220dfff-47b2-4871-b2ab-74288b3137aa"
                        },
                        {
                            "type": "Ext.form.field.File",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "blankText": "此项不能为空",
                                "buttonText": "选择图片",
                                "designer|displayName": "choosePhoto",
                                "emptyText": "选择本地图片路径",
                                "fieldLabel": "上传图片",
                                "id": "choosePicture",
                                "labelWidth": 70,
                                "layout|x": 30,
                                "layout|y": 90,
                                "maxLengthText": "The maximum length for this field is {200}",
                                "name": "choosePhoto",
                                "width": 400
                            },
                            "name": "MyFileUpload",
                            "designerId": "4f57fb05-519b-43b7-b85d-0d6ca9238ad7",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onChoosePictureChange",
                                        "implHandler": [
                                            "var title_photo = Ext.getCmp(\"title_photo\");",
                                            "var name = value.substring(value.lastIndexOf(\"\\\\\") + 1, value.lastIndexOf(\".\"));",
                                            "console.log(name);",
                                            "title_photo.setValue(name);",
                                            ""
                                        ],
                                        "name": "change",
                                        "scope": "me"
                                    },
                                    "name": "onChoosePictureChange",
                                    "designerId": "a54e8037-1f92-4792-addc-d93c17f55ccf"
                                }
                            ]
                        },
                        {
                            "type": "Ext.form.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fieldLabel": "上传用户",
                                "labelWidth": 70,
                                "layout|x": 30,
                                "layout|y": 190,
                                "name": "uploadUser",
                                "value": [
                                    "企业用户"
                                ]
                            },
                            "name": "MyTextField9",
                            "designerId": "8f0d67c7-982b-4ab2-affe-92c904552879"
                        },
                        {
                            "type": "Ext.form.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fieldLabel": "项目编号",
                                "labelWidth": 70,
                                "layout|x": 30,
                                "layout|y": 40,
                                "name": "proCode",
                                "value": [
                                    "20160710****"
                                ]
                            },
                            "name": "MyTextField8",
                            "designerId": "2ca14a62-a310-458f-a4c6-eedb00f923fd"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "autoScroll": true,
                        "layout|region": "center",
                        "store": "Business_photoStore",
                        "title": "图片列表"
                    },
                    "name": "MyGridPanel3",
                    "designerId": "b5480723-a43f-49ae-a880-7efa685a5a37",
                    "cn": [
                        {
                            "type": "Ext.grid.column.RowNumberer",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "string",
                                "text": "序号",
                                "width": 60
                            },
                            "name": "MyRowNumberer3",
                            "designerId": "bf1acb85-d9b4-4e47-ad5a-0263aaffdc11"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "photoTitle",
                                "defaultWidth": 200,
                                "text": "图片标题",
                                "width": 200
                            },
                            "name": "MyColumn9",
                            "designerId": "4293ced0-9743-4e91-887a-996c62593ff6"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "uploadUser",
                                "text": "上传用户"
                            },
                            "name": "MyColumn15",
                            "designerId": "c5e76050-4205-43a4-b5d3-ffc15478b7c5"
                        },
                        {
                            "type": "Ext.grid.column.Date",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "upDate",
                                "text": "上传时间",
                                "width": 159
                            },
                            "name": "MyDateColumn",
                            "designerId": "11d64af1-def3-4439-b132-caba1536ca22"
                        },
                        {
                            "type": "Ext.grid.View",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyGridView3",
                            "designerId": "3500f6eb-7cf6-4e5b-a023-e0dd513c6bbf"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.panel.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "animCollapse": false,
                "collapseDirection": "left",
                "collapseFirst": false,
                "collapsed": false,
                "collapsible": false,
                "dock": null,
                "layout": "border",
                "layout|region": "center",
                "title": "图片预览",
                "titleAlign": "center",
                "titleCollapse": false
            },
            "name": "MyPanel17",
            "designerId": "ac2d9ad7-d617-40ed-b375-fb112691cba8",
            "cn": [
                {
                    "type": "Ext.Img",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dock": null,
                        "layout|region": "center",
                        "src": "images/login/login_center_left.jpg"
                    },
                    "name": "MyImg2",
                    "designerId": "ccf545d3-a746-4bb8-a037-e59cdaf305f7"
                }
            ]
        }
    ]
}